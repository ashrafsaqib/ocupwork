<div class="table-responsive mb-4">
  <!-- Dropdown -->
  <div class="form-group mb-3">
    <label for="select-controller" class="form-label">Select Controller</label>
    <select name="select_controller" id="select-controller" class="form-select">
      <option value="">-- Controller --</option>
      {% for data in checkout_data %}
        <option value="{{ data.BU }}">{{ data.Allocation }}</option>
      {% endfor %}
    </select>
  </div>

  <!-- BU / Allocation Table -->
  <table class="table table-bordered table-hover" id="bu-allocation-table">
    <thead>
      <tr>
        <th>BU</th>
        <th>Allocation</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input type="text" name="bu[]" class="form-control" placeholder="Enter BU"></td>
        <td><input type="text" name="allocation[]" class="form-control" value="100"></td>
      </tr>
    </tbody>
  </table>

  <!-- Add BU button -->
  <button type="button" class="btn btn-sm btn-success" id="add-bu-btn">Add BU</button>
</div>

<script>
document.getElementById('add-bu-btn').addEventListener('click', function () {
  const tableBody = document.querySelector('#bu-allocation-table tbody');
  const newRow = document.createElement('tr');
  newRow.innerHTML = `
    <td><input type="text" name="bu[]" class="form-control" placeholder="Enter BU"></td>
    <td><input type="text" name="allocation[]" class="form-control" placeholder="Enter allocation"></td>
  `;
  tableBody.appendChild(newRow);
});
</script>

  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>{{ column_product }}</th>
        <th class="text-end">{{ column_total }}</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
        <tr>
          <td>{{ product.quantity }}x <a href="{{ product.href }}">{{ product.name }}</a>

            <ul class="list-unstyled mb-0">
              <li>
                <small> - {{ text_model }}: {{ product.model }}</small>
              </li>
              {% for option in product.option %}
                <li>
                  <small> - {{ option.name }}: {{ option.value }}</small>
                </li>
              {% endfor %}

              {% if product.subscription %}
                <li>
                  <small> - {{ text_subscription }}: {{ product.subscription }}</small>
                </li>
              {% endif %}

              {% if product.reward %}
                <li>
                  <small> - {{ text_points }}: {{ product.reward }}</small>
                </li>
              {% endif %}
            </ul>

          </td>
          <td class="text-end">{{ product.total }}</td>
        </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      {% for total in totals %}
        <tr>
          <td class="text-end"><strong>{{ total.title }}</strong></td>
          <td class="text-end">{{ total.text }}</td>
        </tr>
      {% endfor %}
    </tfoot>
  </table>
</div>
<div id="checkout-payment">
  {% if payment %}
    {{ payment }}
  {% else %}
    <div class="text-end"><button type="button" onclick="saveOrder()" id="default-confirm" class="btn btn-primary">{{ button_confirm }}</button></div>
  {% endif %}
</div>
